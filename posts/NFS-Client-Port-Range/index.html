<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="[Linux] Port range for NFS client" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://shihtiy.com/posts/NFS-Client-Port-Range/" /><meta property="og:url" content="https://shihtiy.com/posts/NFS-Client-Port-Range/" /><meta property="og:site_name" content="Shih-Ting, Yuan" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-30T16:17:17+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Linux] Port range for NFS client" /><meta name="twitter:site" content="@shihtiy" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"mainEntityOfPage":{"@type":"WebPage","@id":"https://shihtiy.com/posts/NFS-Client-Port-Range/"},"description":"Introduction","url":"https://shihtiy.com/posts/NFS-Client-Port-Range/","@type":"BlogPosting","headline":"[Linux] Port range for NFS client","dateModified":"2022-05-11T21:34:11+01:00","datePublished":"2021-12-30T16:17:17+00:00","@context":"https://schema.org"}</script><title>[Linux] Port range for NFS client | Shih-Ting, Yuan</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Shih-Ting, Yuan"><meta name="application-name" content="Shih-Ting, Yuan"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en">
<div class="profile-wrapper text-center">
<div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar/VKndUsfW_400x400.jpg" alt="avatar" onerror="this.style.display='none'"> </a>
</div>
<div class="site-title mt-3"> <a href="/">Shih-Ting, Yuan</a>
</div>
<div class="site-subtitle font-italic">Things as they really are.</div>
</div>
<ul class="w-100">
<li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a>
</li>
<li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a>
</li>
<li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a>
</li>
<li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a>
</li>
<li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a>
</li>
</ul>
<div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/shihtiy-tw" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/shihtiy" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/shih-ting-yuan/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href%20=%20'mailto:'%20+%20%5B'shihtiy.tw','gmail.com'%5D.join('@')" aria-label="email"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss"> <i class="fas fa-rss"></i> </a>
</div>
</div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Linux] Port range for NFS client</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div>
<i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel">Cancel</span>
</div></div><div id="main-wrapper">
<div id="main">
<div class="row">
<div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
<h1 data-toc-skip>[Linux] Port range for NFS client</h1>
<div class="post-meta text-muted">
<div> By <em> <a href="https://twitter.com/shihtiy" target="_blank" rel="noopener noreferrer">Shih-Ting, Yuan</a> </em>
</div>
<div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-12-30 16:17:17 +0000" data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 30, 2021, 4:17 PM +0000">Dec 30, 2021</em> </span> <span> Updated <em class="timeago" date="2022-05-11 20:34:11 +0000 " data-toggle="tooltip" data-placement="bottom" title="Wed, May 11, 2022, 8:34 PM +0000">May 11</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="812 words"> <em>4 min</em> read</span>
</div></div>
</div>
<div class="post-content">
<h2 id="introduction">Introduction<a href="#introduction"><i class="fas fa-hashtag"></i></a>
</h2>
<p>This article will go through how NFS client choose the port for communication with NFS server.</p>
<h2 id="scenario">Scenario<a href="#scenario"><i class="fas fa-hashtag"></i></a>
</h2>
<p>Network File System (NFS) is a protocol to allow a client to access files on a remote server over a network like local storage.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> To secure and restrict the access from clients to the files on a remote server, a administrator usually will use firewall to limit the access resources.</p>
<p>On AWS, VPC provides several firewall configurations, the basic firewall configurations are the followings:</p>
<ul>
<li>security group:<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup><ul><li>a stateful firewall at the network interface(ENI) level</li></ul>
</li>
<li>network access control list (ACL):<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" class="footnote" rel="footnote">3</a></sup><ul><li>a stateless firewall at the subnet level.</li></ul>
</li>
</ul>
<h2 id="issue-description">Issue Description<a href="#issue-description"><i class="fas fa-hashtag"></i></a>
</h2>
<p>When using Amazon Elastic File System (Amazon EFS), which support NFS, on the EFS side, it requires the configuration of security groups and the security groups should allow inbound access for the TCP protocol on the NFS port from the clients (EC2 instances).<sup id="fnref:4" role="doc-noteref"><a href="#fn:4" class="footnote" rel="footnote">4</a></sup> However, if we configure NACL on the subnets of EFS, we not only need to allow the inbound traffic from the clients to the port 2049(NFS port), but we also need to consider the outbound traffic to the client from EFS back to the clients.</p>
<p>For NACL, we need to know what the port range the NFS client will use for communication with NFS server, or we will get timeout if the NACL does not allow the traffic from EFS to the clients.</p>
<h2 id="explanation">Explanation<a href="#explanation"><i class="fas fa-hashtag"></i></a>
</h2>
<h3 id="ephemeral-port">Ephemeral port<a href="#ephemeral-port"><i class="fas fa-hashtag"></i></a>
</h3>
<p>Typically, when a client communicate with service on a server, each transport communication (or <a href="https://en.wikipedia.org/wiki/Network_socket" target="_blank" rel="noopener noreferrer">network socket</a>) is identified by the five-tuple(or <strong>socket address</strong>):</p>
<ul>
<li>Protocol</li>
<li>Source Address</li>
<li>Destination Address</li>
<li>Source Port</li>
<li>Destination Port</li>
</ul>
<p>Services are usually located at fixed, <a href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers" target="_blank" rel="noopener noreferrer">“well-known” ports</a>, for example, HTTP services usually listen on port 80 and HTTPS services usually listen on port 443. For client side, no fixed port is defined and a port is chosen automatically by the client. Ports chosen automatically by the networking stack are known as ephemeral ports.</p>
<p>According to <a href="https://datatracker.ietf.org/doc/html/rfc6056#section-3.2" target="_blank" rel="noopener noreferrer">RFC 6056</a>, the ephemeral port range should be 1024-65535.</p>
<p>However, if we only allow port 1024-65535 for outbound traffic on the NACL of the subnets where EFS locates, we will get timeout when we try to mount the EFS from an EC2 instances from a different subnet (same AZ).</p>
<h3 id="privileged-source-port-for-nfs-client">Privileged source port for NFS client<a href="#privileged-source-port-for-nfs-client"><i class="fas fa-hashtag"></i></a>
</h3>
<p>For an NFS client, it’s worth noting that the source port will not be the ephemeral port(1024-65535) as we expected for a transport connection. If we check an ESTABLISH connection for NFS, we will see the connection locates on a privileged port (a port number below 1024 and only a process with root privileges may create a socket with a privileged port):</p>
<div class="language-bash highlighter-rouge">
<div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td>
<td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>mount <span class="nt">-t</span> nfs4 <span class="nt">-o</span> <span class="nv">nfsvers</span><span class="o">=</span>4.1,rsize<span class="o">=</span>1048576,wsize<span class="o">=</span>1048576,hard,timeo<span class="o">=</span>600,retrans<span class="o">=</span>2,resvport fs-xxx.efs.us-east-1.amazonaws.com:/ /mnt

<span class="nv">$ </span><span class="nb">sudo </span>netstat <span class="nt">-tanpo</span> | <span class="nb">grep </span>2049
tcp        0      0 172.31.38.122:711       172.31.35.153:2049      ESTABLISHED -                    keepalive <span class="o">(</span>27.52/0/0<span class="o">)</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>From <a href="https://linux.die.net/man/5/nfs" target="_blank" rel="noopener noreferrer">NFS man page</a>, it explains that NFS client use privileged port for security reason:</p>
<blockquote><p>The NFS client can choose any source port value for its sockets, but usually chooses a <em>privileged</em> port… As described above, the traditional default NFS authentication scheme, known as AUTH_SYS, relies on sending local UID and GID numbers to identify users making NFS requests. An NFS server assumes that if a connection comes from a privileged port, the UID and GID numbers in the NFS requests on this connection have been verified by the client’s kernel or some other local authority.</p></blockquote>
<p>The privileged port range is defined by these two kernel parameters: max_resvport and min_resvport<sup id="fnref:5" role="doc-noteref"><a href="#fn:5" class="footnote" rel="footnote">5</a></sup></p>
<div class="language-bash highlighter-rouge">
<div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td>
<td class="rouge-code"><pre><span class="nv">$ </span>sysctl <span class="nt">-a</span> | <span class="nb">grep </span>resvport
sunrpc.max_resvport <span class="o">=</span> 1023
sunrpc.min_resvport <span class="o">=</span> 665
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>We can see the NFS client port change if we update these two kernel parameters:</p>
<div class="language-bash highlighter-rouge">
<div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button>
</div>
<div class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
<td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-w</span> sunrpc.max_resvport<span class="o">=</span>2048
sunrpc.max_resvport <span class="o">=</span> 2048
<span class="nv">$ </span><span class="nb">sudo </span>sysctl <span class="nt">-w</span> sunrpc.min_resvport<span class="o">=</span>1024
sunrpc.min_resvport <span class="o">=</span> 1024

<span class="nv">$ </span>sysctl <span class="nt">-a</span> | <span class="nb">grep </span>resvport
sunrpc.max_resvport <span class="o">=</span> 2048
sunrpc.min_resvport <span class="o">=</span> 1024

<span class="nv">$ </span><span class="nb">sudo </span>mount <span class="nt">-t</span> nfs4 <span class="nt">-o</span> <span class="nv">nfsvers</span><span class="o">=</span>4.1,rsize<span class="o">=</span>1048576,wsize<span class="o">=</span>1048576,hard,timeo<span class="o">=</span>600,retrans<span class="o">=</span>2,resvport fs-0705b30dbe1741990.efs.us-east-1.amazonaws.com:/ /mnt
<span class="nv">$ </span><span class="nb">sudo </span>netstat <span class="nt">-anotp</span> | <span class="nb">grep </span>2049
tcp        0      0 172.31.33.197:1306      172.31.35.153:2049      ESTABLISHED -                    keepalive <span class="o">(</span>23.93/0/0<span class="o">)</span>
</pre></td>
</tr></tbody></table></code></div>
</div>
<p>If we allow the outbound traffic on the NACL of the EFS’s subnets to the privileged port range of the client, the client will mount the EFS successfully.</p>
<h2 id="summary">Summary<a href="#summary"><i class="fas fa-hashtag"></i></a>
</h2>
<p>Even though we can allow the privileged port of the clients on the NACL for EFS, the configuration will be difficult and complex because:</p>
<ul>
<li>the privileged port ranges depend on the system configuration of the client side</li>
<li>the NACL is subnet-level firewall, we need to consider other service in the same subnet if any security concern raise when allow outbound for privileged port</li>
</ul>
<p>If no other specific business use case or concern, we can use security group on EFS to allow inbound traffic from client side without concerning the client source port.</p>
<h2 id="references">References<a href="#references"><i class="fas fa-hashtag"></i></a>
</h2>
<div class="footnotes" role="doc-endnotes"><ol>
<li id="fn:1" role="doc-endnote"><p><a href="https://en.wikipedia.org/wiki/Network_File_System" target="_blank" rel="noopener noreferrer">Network File System - Wikipedia</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">↩</a></p></li>
<li id="fn:2" role="doc-endnote"><p><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_SecurityGroups.html" target="_blank" rel="noopener noreferrer">Security groups for your VPC</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">↩</a></p></li>
<li id="fn:3" role="doc-endnote"><p><a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-network-acls.html" target="_blank" rel="noopener noreferrer">Network ACLs</a> <a href="#fnref:3" class="reversefootnote" role="doc-backlink">↩</a></p></li>
<li id="fn:4" role="doc-endnote"><p><a href="https://docs.aws.amazon.com/efs/latest/ug/accessing-fs-create-security-groups.html" target="_blank" rel="noopener noreferrer">Creating security groups</a> <a href="#fnref:4" class="reversefootnote" role="doc-backlink">↩</a></p></li>
<li id="fn:5" role="doc-endnote"><p><a href="https://www.kernel.org/doc/Documentation/admin-guide/kernel-parameters.txt" target="_blank" rel="noopener noreferrer">https://www.kernel.org/doc/Documentation/admin-guide/kernel-parameters.txt</a> <a href="#fnref:5" class="reversefootnote" role="doc-backlink">↩</a></p></li>
</ol></div>
</div>
<div class="post-tail-wrapper text-muted">
<div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href="/categories/csie/">CSIE</a>, <a href="/categories/linux/">Linux</a>
</div>
<div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration">linux</a> <a href="/tags/nfs/" class="post-tag no-text-decoration">nfs</a> <a href="/tags/tcp/" class="post-tag no-text-decoration">tcp</a> <a href="/tags/ip/" class="post-tag no-text-decoration">ip</a> <a href="/tags/firewall/" class="post-tag no-text-decoration">firewall</a>
</div>
<div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
<div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer"> CC BY 4.0 </a> by the author.</div>
<div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%5BLinux%5D%20Port%20range%20for%20NFS%20client%20-%20Shih-Ting,%20Yuan&amp;url=https://shihtiy.com/posts/NFS-Client-Port-Range/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener noreferrer" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%5BLinux%5D%20Port%20range%20for%20NFS%20client%20-%20Shih-Ting,%20Yuan&amp;u=https://shihtiy.com/posts/NFS-Client-Port-Range/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener noreferrer" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://shihtiy.com/posts/NFS-Client-Port-Range/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener noreferrer" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="https://telegram.me/share?text=%5BLinux%5D%20Port%20range%20for%20NFS%20client%20-%20Shih-Ting,%20Yuan&amp;url=https://shihtiy.com/posts/NFS-Client-Port-Range/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener noreferrer" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span>
</div>
</div>
</div>
</div></div>
<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">
<div class="access">
<div id="access-lastmod" class="post">
<div class="panel-heading">Recent Update</div>
<ul class="post-content pl-0 pb-1 ml-1 mt-2">
<li><a href="/posts/too-long-for-Unix-domain-socket/">[Linux] Why do I run into '...too long for Unix domain socket' when git clone with SSH?</a></li>
<li><a href="/posts/max-open-file-limit-for-system-service/">[Linux] Max open file limit with system service</a></li>
<li><a href="/posts/NFS-Client-Port-Range/">[Linux] Port range for NFS client</a></li>
<li><a href="/posts/CLB-Scaling-in-AZ/">[AWS][CLB] Which AZ will CLB scale?</a></li>
<li><a href="/posts/ECS-calculate-CPU-utilization-metadata-endpoing/">[AWS][ECS] How to calculate CPU utilization from ECS endpoint?</a></li>
</ul>
</div>
<div id="access-tags">
<div class="panel-heading">Trending Tags</div>
<div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ecs/">ecs</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cpu/">cpu</a> <a class="post-tag" href="/tags/clb/">clb</a> <a class="post-tag" href="/tags/elb/">elb</a> <a class="post-tag" href="/tags/firewall/">firewall</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/ip/">ip</a> <a class="post-tag" href="/tags/memory/">memory</a>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5">
<div class="panel-heading pl-3 pt-2 mb-2">Contents</div>
<nav id="toc" data-toggle="toc"></nav>
</div>
</div>
</div>
<div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
<div id="related-posts" class="mt-5 mb-2 mb-sm-4">
<h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
<div class="card-deck mb-4">
<div class="card"> <a href="/posts/too-long-for-Unix-domain-socket/"><div class="card-body"> <em class="timeago small" date="2021-12-28 22:00:00 +0000">Dec 28, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Linux] Why do I run into '...too long for Unix domain socket' when git clone with SSH?</h3>
<div class="text-muted small"><p> Summary This article will go through why we may will run into ... too long for Unix domain socket issue when git clone with SSH after they configure the ControlMaster and ControlPath to accelerate...</p></div>
</div></a>
</div>
<div class="card"> <a href="/posts/max-open-file-limit-for-system-service/"><div class="card-body"> <em class="timeago small" date="2021-12-29 15:50:02 +0000">Dec 29, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Linux] Max open file limit with system service</h3>
<div class="text-muted small"><p> Introduction This article will go through an interesting configuration topics for: the max open file limit with system service (systemd daemon service) the relation between PAM (Pluggable Au...</p></div>
</div></a>
</div>
<div class="card"> <a href="/posts/CLB-Scaling-in-AZ/"><div class="card-body"> <em class="timeago small" date="2022-01-02 17:20:24 +0000">Jan 2</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[AWS][CLB] Which AZ will CLB scale?</h3>
<div class="text-muted small"><p> Introduction When under the following conditions: CLB enables multiple AZs. Cross-zone load balancing is disabled. Healthy backend instances only locate in one of the AZs. CLB DNS only r...</p></div>
</div></a>
</div>
</div>
</div>
<div class="post-navigation d-flex justify-content-between"> <a href="/posts/max-open-file-limit-for-system-service/" class="btn btn-outline-primary" prompt="Older"><p>[Linux] Max open file limit with system service</p></a> <a href="/posts/CLB-Scaling-in-AZ/" class="btn btn-outline-primary" prompt="Newer"><p>[AWS][CLB] Which AZ will CLB scale?</p></a>
</div>
<div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/" target="_blank" rel="noopener noreferrer">Disqus</a>.</p></div>
<script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://shihtiy.com/posts/NFS-Client-Port-Range/'; this.page.identifier = '/posts/NFS-Client-Port-Range/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://shihtiy.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script>
</div></div></div>
<footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted">
<div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/shihtiy" target="_blank" rel="noopener noreferrer">Shih-Ting, Yuan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div>
<div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener noreferrer">Chirpy</a> theme.</p></div>
</div></footer>
</div>
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content">
<div id="search-hints"><div id="access-tags">
<div class="panel-heading">Trending Tags</div>
<div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ecs/">ecs</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cpu/">cpu</a> <a class="post-tag" href="/tags/clb/">clb</a> <a class="post-tag" href="/tags/elb/">elb</a> <a class="post-tag" href="/tags/firewall/">firewall</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/ip/">ip</a> <a class="post-tag" href="/tags/memory/">memory</a>
</div>
</div></div>
<div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
</div></div>
</div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-1HNJH4QWWY"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-1HNJH4QWWY'); }); </script>
